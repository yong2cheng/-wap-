webpackJsonp([11,22],{"051i":function(e,t,n){"use strict";function a(e){n("Cf14")}Object.defineProperty(t,"__esModule",{value:!0});var r=n("bWOo"),i=n.n(r);for(var l in r)"default"!==l&&function(e){n.d(t,e,function(){return r[e]})}(l);var o=n("csX2"),s=n("C7Lr"),c=a,d=s(i.a,o.a,!1,c,"data-v-0876e6c0",null);t.default=d.exports},"4pW/":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("lC5x"),i=a(r),l=n("J0Oq"),o=a(l);n("9rMa");t.default={props:["info"],data:function(){return{roles:[{label:"超级管理员",value:"admin"},{label:"普通管理员",value:"default"}],loading:!1,dialogTableVisible:!0,rules:{name:[{required:!0,message:"请填写名字",trigger:"blur"}],username:[{required:!0,message:"请填写用户名",trigger:"blur"}],old_pwd:[{required:!0,message:"请填写原密码",trigger:"blur"}],pwd:[{required:!0,message:"请填写密码",trigger:"blur"}],roles:[{required:!0,message:"请选择权限",trigger:"change",type:"array"}]}}},methods:{close:function(){this.$emit("close")},submitForm:function(e){var t=this;this.loading=!0,this.$refs[e].validate(function(){var e=(0,o.default)(i.default.mark(function e(n){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=18;break}return e.prev=1,delete t.info.createTime,delete t.info.releaseTime,e.next=6,t.$store.dispatch("updateUser",t.info);case 6:t.loading=!1,t.$router.push("/permission/list"),t.close(),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),t.info.pwd="",t.info.old_pwd="",t.loading=!1;case 16:e.next=21;break;case 18:return console.log("error submit!!"),t.loading=!1,e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,t,[[1,11]])}));return function(t){return e.apply(this,arguments)}}())}}}},Cf14:function(e,t,n){var a=n("uknv");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("FIqI")("7c9ffa9e",a,!0,{})},VtzT:function(e,t,n){"use strict";function a(e){n("w+Z8")}Object.defineProperty(t,"__esModule",{value:!0});var r=n("4pW/"),i=n.n(r);for(var l in r)"default"!==l&&function(e){n.d(t,e,function(){return r[e]})}(l);var o=n("v5cu"),s=n("C7Lr"),c=a,d=s(i.a,o.a,!1,c,"data-v-375978cb",null);t.default=d.exports},bWOo:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n("4YfN"),i=a(r),l=n("lC5x"),o=a(l),s=n("J0Oq"),c=a(s),d=n("9rMa"),u=n("VtzT"),p=a(u);t.default={components:{EditComponent:p.default},data:function(){return{proxyFlag:sessionStorage.getItem("proxyFlag"),dateValue:"",keyword:"",keywordRealName:"",keywordDays:14,keywordChildCount:"",editShow:!1,userInfo:{},loading:!1,pageindex:1,pagesize:10,childCountOrder:"",size_scoped:[10,20,30,40],headerOptions:[{label:"id",prop:"_id",hidden:!0,headerAlign:"center",align:"center",width:""},{label:"用户名",prop:"username",hidden:!1,headerAlign:"center",align:"center",minWidth:"100px"},{label:"真实姓名",prop:"realName",hidden:!1,headerAlign:"center",align:"center",width:"",minWidth:"75px"},{label:"会员类型名称",prop:"vipTypeName",hidden:!1,headerAlign:"center",align:"center",width:"",sort:!1,minWidth:"110px"},{label:"用户状态",prop:"status",hidden:!1,headerAlign:"center",align:"center",width:"",sort:!1,minWidth:"75px"},{label:"用户积分",prop:"integral",hidden:!1,headerAlign:"center",align:"center",width:"",sort:!1},{label:"用户层级",prop:"userLevel",hidden:!1,headerAlign:"center",align:"center",width:"",sort:!1},{label:"上级姓名",prop:"parentRealName",hidden:!1,headerAlign:"center",align:"center",width:"",sort:!1,minWidth:"75px"},{label:"上级手机号",prop:"parentUsername",hidden:!1,headerAlign:"center",align:"center",width:"",sort:!1,minWidth:"100px"},{label:"下线人数",prop:"childCount",hidden:!1,headerAlign:"center",align:"center",width:"",sort:!0,minWidth:"110px"},{label:"注册时间",prop:"createDate",hidden:!1,headerAlign:"center",align:"center",width:"",sort:!1,minWidth:"150px"}],vipTypeArr:[{name:"所有会员",vipType:""},{name:"非会员",vipType:0},{name:"普通会员",vipType:1},{name:"高级会员",vipType:2},{name:"体验会员",vipType:3}],vipType:"",userStatusArr:[{name:"所有状态",status:""},{name:"禁用",status:0},{name:"启用",status:1}],userStatus:"",multipleSelection:[]}},mounted:function(){this.getUserList()},methods:{tableChange:function(e){var t=(e.column,e.prop),n=e.order;console.log(n),this.orderColumn=t,this.childCountOrder="descending"==n?0:"ascending"==n?1:"",this.getUserList()},increment:function(e){return e+1+(this.pageindex-1)*this.pagesize},close:function(){this.editShow=!1,this.getUserList()},handleSizeChange:function(e){this.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.pageindex=e,this.getUserList()},getUserList:function(){var e=this;return(0,c.default)(o.default.mark(function t(){var n;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={current:e.pageindex,size:e.pagesize},(e.childCountOrder||0===e.childCountOrder)&&(n.childCountOrder=e.childCountOrder),e.dateValue&&(n.beginDate=e.dateValue[0],n.endDate=e.dateValue[1]),e.keyword&&(n.username=e.keyword),e.keywordRealName&&(n.realName=e.keywordRealName),(e.vipType||0===e.vipType)&&(n.vipType=e.vipType),(e.userStatus||0===e.userStatus)&&(n.status=e.userStatus),(e.keywordDays||0===e.keywordDays)&&(n.days=e.keywordDays),(e.keywordChildCount||0===e.keywordChildCount)&&(n.childCount=e.keywordChildCount),e.loading=!0,t.prev=10,t.next=13,e.$store.dispatch("getUserList",n);case 13:e.loading=!1,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(10),e.loading=!1;case 19:case"end":return t.stop()}},t,e,[[10,16]])}))()},changStatus:function(e,t,n){var a=this;return(0,c.default)(o.default.mark(function r(){var i,l;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i="",l="",1==t?(i="是否启用该用户？",l="启用成功"):(i="是否禁用该用户",l="禁用成功"),1==n?(i="是否把该用户取消代理？",l="取消代理成功"):2==n&&(i="是否把该用户设为代理",l="设为代理成功"),a.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((0,c.default)(o.default.mark(function r(){var i;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i={id:e.row.id},(t||0===t)&&(i.status=t),n&&(i.userType=n),r.next=5,a.$store.dispatch("updateStatus",i);case 5:a.$message({message:l,type:"success",duration:1500}),a.getUserList();case 7:case"end":return r.stop()}},r,a)})));case 4:case"end":return r.stop()}},r,a)}))()}},computed:(0,i.default)({},(0,d.mapGetters)(["userList","userTotal"]))}},bvLu:function(e,t,n){t=e.exports=n("UTlt")(!1),t.push([e.i,"article[data-v-375978cb]{text-align:center;padding:0 100px}article h2[data-v-375978cb]{text-align:center;line-height:80px;color:#666}article .box[data-v-375978cb]{width:500px;text-align:left}article .block[data-v-375978cb]{width:100%;display:block}article .left-item[data-v-375978cb]{text-align:left}article .submit[data-v-375978cb]{width:100px}",""])},csX2:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("div",{staticClass:"search"},[n("el-input",{staticStyle:{width:"150px","margin-bottom":"5px"},attrs:{placeholder:"请输入用户名","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getUserList(t):null}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),n("el-input",{staticStyle:{width:"150px","margin-bottom":"5px"},attrs:{placeholder:"请输入真实姓名","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getUserList(t):null}},model:{value:e.keywordRealName,callback:function(t){e.keywordRealName=t},expression:"keywordRealName"}}),e._v(" "),n("el-input",{staticStyle:{width:"180px","margin-bottom":"5px"},attrs:{placeholder:"请输入注册多少天内","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getUserList(t):null}},model:{value:e.keywordDays,callback:function(t){e.keywordDays=t},expression:"keywordDays"}}),e._v(" "),n("el-input",{staticStyle:{width:"215px","margin-bottom":"5px"},attrs:{placeholder:"请输入下线人数小于多少人","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.getUserList(t):null}},model:{value:e.keywordChildCount,callback:function(t){e.keywordChildCount=t},expression:"keywordChildCount"}}),e._v(" "),n("el-select",{staticClass:"block",staticStyle:{width:"150px","margin-bottom":"5px"},attrs:{placeholder:"请选择会员类型"},model:{value:e.vipType,callback:function(t){e.vipType=t},expression:"vipType"}},e._l(e.vipTypeArr,function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.vipType}})})),e._v(" "),n("el-select",{staticClass:"block",staticStyle:{width:"150px","margin-bottom":"5px"},attrs:{placeholder:"请选择用户状态"},model:{value:e.userStatus,callback:function(t){e.userStatus=t},expression:"userStatus"}},e._l(e.userStatusArr,function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.status}})})),e._v(" "),n("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:e.loading},on:{click:function(t){e.pageindex=1,e.getUserList()}}},[e._v("搜索")])],1),e._v(" "),n("div",{staticStyle:{height:"calc(100vh - 270px)"}},[n("el-table",{ref:"multipleTable",attrs:{data:e.userList,"tooltip-effect":"dark",stripe:"",border:"",height:"100%"},on:{"sort-change":e.tableChange}},[n("el-table-column",{attrs:{type:"index",width:"55",align:"center","header-align":"center",index:e.increment,label:"序号"}}),e._v(" "),e._l(e.headerOptions,function(t,a){return t.hidden?e._e():n("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"",label:t.label,prop:t.prop,"header-align":t.headerAlign,align:t.align,sortable:!!t.sort&&"custom","min-width":t.minWidth},scopedSlots:e._u([{key:"default",fn:function(t){return["avatar"===t.column.property?n("div",[n("img",{staticStyle:{height:"40px"},attrs:{src:t.row[t.column.property],alt:""}})]):"status"===t.column.property?n("div",[e._v(e._s(1==t.row.status?"启用":"禁用"))]):"childCount"===t.column.property?n("div",[e._v(e._s(t.row[t.column.property]))]):"integral"===t.column.property?n("div",[e._v(e._s(t.row[t.column.property]))]):n("div",[e._v(e._s(t.row[t.column.property]||"无"))])]}}])})}),e._v(" "),1!=e.proxyFlag?n("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.changStatus(t,0)}}},[e._v("禁用")]):n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.changStatus(t,1)}}},[e._v("启用")]),e._v(" "),2==t.row.userType?n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.changStatus(t,"",1)}}},[e._v("取消代理")]):n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.changStatus(t,"",2)}}},[e._v("设为代理")])]}}])}):e._e()],2)],1),e._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.pageindex,"page-sizes":e.size_scoped,"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.userTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),e.editShow?n("EditComponent",{attrs:{info:e.userInfo},on:{close:e.close}}):e._e()],1)},r=[],i={render:a,staticRenderFns:r};t.a=i},uknv:function(e,t,n){t=e.exports=n("UTlt")(!1),t.push([e.i,"article[data-v-0876e6c0]{padding:20px}article .search[data-v-0876e6c0]{padding-bottom:20px}article .search .el-input[data-v-0876e6c0]{width:300px}article .pagination[data-v-0876e6c0]{text-align:right;padding:20px 0}article .tag[data-v-0876e6c0]{margin:0 10px}",""])},v5cu:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",[n("el-dialog",{staticClass:"edit-wrapper",attrs:{title:"管理员编辑",visible:e.dialogTableVisible,width:"80%"},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.close}},[n("div",{staticClass:"box"},[n("el-form",{ref:"form",staticClass:"form",attrs:{model:e.info,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"名字",prop:"name"}},[n("el-input",{attrs:{type:"text"},model:{value:e.info.name,callback:function(t){e.$set(e.info,"name",t)},expression:"info.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{attrs:{type:"text"},model:{value:e.info.username,callback:function(t){e.$set(e.info,"username",t)},expression:"info.username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"原密码",prop:"old_pwd"}},[n("el-input",{attrs:{type:"password"},model:{value:e.info.old_pwd,callback:function(t){e.$set(e.info,"old_pwd",t)},expression:"info.old_pwd"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"新密码",prop:"pwd"}},[n("el-input",{attrs:{type:"password"},model:{value:e.info.pwd,callback:function(t){e.$set(e.info,"pwd",t)},expression:"info.pwd"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"权限",prop:"roles"}},[n("el-select",{staticClass:"block",attrs:{multiple:"",placeholder:"请选择"},model:{value:e.info.roles,callback:function(t){e.$set(e.info,"roles",t)},expression:"info.roles"}},e._l(e.roles,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.submitForm("form")}}},[e._v("编辑")])],1)],1)],1)])],1)},r=[],i={render:a,staticRenderFns:r};t.a=i},"w+Z8":function(e,t,n){var a=n("bvLu");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("FIqI")("652c3b0c",a,!0,{})}});